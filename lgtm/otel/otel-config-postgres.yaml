receivers:
  # PostgreSQL Metrics Receiver
  postgresql:
    endpoint: postgres://myuser:mypassword@postgres:5432/mydb?sslmode=disable
    collection_interval: 10s
    transport: conn
    metrics:
      enable:
        - postgresql.connections
        - postgresql.commits
        - postgresql.rollbacks
        - postgresql.rows

exporters:
  # Send to LGTM internal OTLP endpoint
  otlp:
    endpoint: http://127.0.0.1:4317
    tls:
      insecure: true

  # Print everything to stdout (for debugging)
  debug:
    verbosity: detailed

service:
  telemetry:
    logs:
      level: debug

  pipelines:
    metrics:
      receivers: [postgresql]
      processors: []
      exporters: [debug, otlp]
